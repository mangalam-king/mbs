<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Account Opening Form</title>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --sky:#4fc3f7;
  --violet:#6a1b9a;
  --gold:#d4af37;
  --silver:#cfd8dc;
}
body{
  margin:0;
  font-family:Segoe UI, Arial;
  background:linear-gradient(135deg,var(--sky),var(--violet));
}
.container{
  max-width:850px;
  margin:30px auto;
  background:#fff;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
  overflow:hidden;
}
.header{
  background:linear-gradient(135deg,var(--violet),var(--sky));
  color:#fff;
  padding:25px;
  text-align:center;
}
.section{
  padding:25px;
  border-bottom:1px solid var(--silver);
}
.section-title{
  color:var(--violet);
  font-weight:600;
  border-left:5px solid var(--gold);
  padding-left:10px;
  margin-bottom:15px;
}
label{display:block;margin:10px 0 5px;}
input,select,textarea{
  width:100%;
  padding:10px;
  border-radius:6px;
  border:1px solid var(--silver);
}
textarea{resize:vertical}
.radio-group label{display:inline-block;margin-right:20px}
.id-section{display:none}
canvas{border:2px dashed var(--silver);border-radius:8px}
.footer{text-align:center;padding:25px}
button{
  background:linear-gradient(135deg,var(--violet),var(--sky));
  color:#fff;
  border:none;
  padding:14px 40px;
  font-size:16px;
  border-radius:30px;
  cursor:pointer;
}
button:disabled{opacity:.5;cursor:not-allowed}
</style>
</head>

<body>
<div class="container">
<div class="header">
  <h2>Bank Account Opening Form</h2>
</div>

<form id="accountForm"
action="https://formspree.io/f/xbdyeagw"
method="POST"
enctype="multipart/form-data">

<!-- ACCOUNT INFO -->
<div class="section">
<div class="section-title">Account Information</div>

<label>Account Number</label>
<input type="text" name="Account Number" id="accountNumber" readonly>

<label>Application Date</label>
<input type="text" name="Application Date" id="todayDate" readonly>
</div>

<!-- PERSONAL -->
<div class="section">
<div class="section-title">Personal Details</div>

<label>Full Name</label>
<input type="text" name="Name" required>

<label>Father / Mother Name</label>
<input type="text" name="Parent Name" required>

<label>Date of Birth</label>
<input type="date" name="DOB" required>

<label>Gender</label>
<select name="Gender" required>
<option value="">Select</option>
<option>Male</option>
<option>Female</option>
<option>Other</option>
</select>

<label>Mobile Number</label>
<input type="text" name="Mobile" id="mobile" maxlength="10" required>

<label>Email</label>
<input type="email" name="Email">

<label>Nationality</label>
<input type="text" name="Nationality" value="Indian" required>
</div>

<!-- ADDRESS -->
<div class="section">
<div class="section-title">Address Details</div>

<label>Residential Address</label>
<textarea name="Address" required></textarea>

<label>City</label>
<input type="text" name="City" required>

<label>State</label>
<input type="text" name="State" required>

<label>PIN Code</label>
<input type="text" name="PIN" maxlength="6" required>
</div>

<!-- IDENTITY -->
<div class="section">
<div class="section-title">Identity Proof</div>

<div class="radio-group">
<label><input type="radio" name="ID Type" value="MATS" onclick="selectID('mats')" required> MATS</label>
<label><input type="radio" name="ID Type" value="Form60" onclick="selectID('form60')"> Form 60</label>
</div>

<div id="matsBox" class="id-section">
<label>Select MATS Number</label>
<select name="MATS Number">
<option value="">Select</option>
<option>2016</option>
<option>1234</option>
</select>
</div>

<div id="form60Box" class="id-section">
<label>Form 60 Number</label>
<input type="text" name="Form60 Number">
<label>Form 60 Address</label>
<input type="text" name="Form60 Address">
<label>Date</label>
<input type="date" name="Form60 Date">
</div>
</div>

<!-- ACCOUNT DETAILS -->
<div class="section">
<div class="section-title">Account Details</div>

<label>Account Type</label>
<select name="Account Type" required>
<option value="">Select</option>
<option>Savings</option>
<option>Current</option>
<option>Zero Balance</option>
</select>

<label>Initial Deposit (â‚¹)</label>
<input type="number" name="Deposit" required>

<label>Mode of Operation</label>
<select name="Mode" required>
<option value="">Select</option>
<option>Self</option>
<option>Either or Survivor</option>
<option>Joint</option>
</select>
</div>

<!-- SIGNATURE -->
<div class="section">
<div class="section-title">Signature</div>
<canvas id="signaturePad" width="600" height="200"></canvas><br><br>
<button type="button" onclick="clearSignature()">Clear</button>
<input type="hidden" name="Signature" id="signatureData">
</div>

<!-- DECLARATION -->
<div class="footer">
<label>
<input type="checkbox" required>
I declare that the information provided is true and correct.
</label><br><br>
<button type="submit" id="submitBtn" disabled>Submit Application</button>
</div>

</form>
</div>

<script>
// DATE
const d=new Date();
todayDate.value=`${String(d.getDate()).padStart(2,"0")}-${String(d.getMonth()+1).padStart(2,"0")}-${d.getFullYear()}`;

// ID toggle
function selectID(t){
matsBox.style.display=t==="mats"?"block":"none";
form60Box.style.display=t==="form60"?"block":"none";
}

// MOBILE + ACCOUNT NO
let generated=false;
mobile.addEventListener("input",()=>{
mobile.value=mobile.value.replace(/\D/g,"");
if(/^[0-9]{10}$/.test(mobile.value)){
submitBtn.disabled=false;
if(!generated){
const last4=mobile.value.slice(-4);
const first4=Math.floor(1000+Math.random()*9000);
accountNumber.value=first4+last4;
generated=true;
}
}else submitBtn.disabled=true;
});

// SIGNATURE PAD
const canvas=signaturePad,ctx=canvas.getContext("2d");
let draw=false;
canvas.onmousedown=e=>{draw=true;ctx.beginPath();ctx.moveTo(e.offsetX,e.offsetY);}
canvas.onmousemove=e=>{if(draw){ctx.lineTo(e.offsetX,e.offsetY);ctx.stroke();}}
canvas.onmouseup=()=>draw=false;
canvas.addEventListener("touchstart",e=>{
draw=true;const t=e.touches[0];ctx.beginPath();
ctx.moveTo(t.clientX-canvas.offsetLeft,t.clientY-canvas.offsetTop);
});
canvas.addEventListener("touchmove",e=>{
if(draw){const t=e.touches[0];
ctx.lineTo(t.clientX-canvas.offsetLeft,t.clientY-canvas.offsetTop);
ctx.stroke();}
});
canvas.addEventListener("touchend",()=>draw=false);
function clearSignature(){ctx.clearRect(0,0,canvas.width,canvas.height);}

// PDF GENERATION
accountForm.addEventListener("submit",function(e){
e.preventDefault();
signatureData.value=canvas.toDataURL();
const {jsPDF}=window.jspdf;
const pdf=new jsPDF();
let y=10;
pdf.text("BANK ACCOUNT OPENING FORM",50,y); y+=10;
new FormData(this).forEach((v,k)=>{
if(k!=="Signature"){pdf.text(`${k}: ${v}`,10,y);y+=6;}
});
pdf.addPage();
pdf.text("Signature",10,20);
pdf.addImage(signatureData.value,"PNG",10,30,80,30);
pdf.save("Account_Opening_Form.pdf");
setTimeout(()=>this.submit(),500);
});
</script>

</body>
</html>
