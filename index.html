<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MBS Mats. Bank – Account Opening</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#e6f0ff,#f9fbff);
  padding:20px;
}
form{
  max-width:950px;
  margin:auto;
  background:#fff;
  padding:30px;
  border-radius:22px;
  box-shadow:0 15px 35px rgba(0,0,0,.12);
}
h2{
  text-align:center;
  color:#003366;
  margin-bottom:10px;
}
h3{
  margin-top:35px;
  color:#003366;
  border-bottom:2px solid #003366;
  padding-bottom:6px;
}
.row{
  display:flex;
  gap:25px;
  margin-top:20px;
  flex-wrap:wrap;
}
input,select,textarea{
  flex:1;
  min-width:calc(33% - 20px);
  padding:14px;
  border-radius:16px;
  border:1px solid #ccc;
  font-size:14px;
}
textarea{min-width:100%}
input[readonly]{background:#f3f7ff}
button{
  width:100%;
  margin-top:40px;
  padding:18px;
  font-size:18px;
  border:none;
  border-radius:18px;
  background:#003366;
  color:white;
  cursor:pointer;
}
button:hover{background:#0055aa}
.note{
  font-size:13px;
  color:#555;
  margin-top:10px;
}
@media(max-width:700px){
  input,select{min-width:100%}
}
</style>
</head>

<body>

<form action="https://formspree.io/f/xbdyeagw" method="POST" enctype="multipart/form-data">

<h2>MBS Mats. Bank<br>Online Account Opening</h2>

<!-- PERSONAL INFO -->
<h3>Personal Information</h3>
<div class="row">
  <input name="first_name" placeholder="First Name" required>
  <input name="middle_name" placeholder="Middle Name">
  <input name="last_name" placeholder="Last Name" required>
</div>

<div class="row">
  <input name="guardian_name" placeholder="Father / Guardian Name" required>
  <input type="date" name="dob" required>
  <select name="gender" required>
    <option value="">Gender</option>
    <option>Male</option>
    <option>Female</option>
    <option>Other</option>
  </select>
</div>

<div class="row">
  <input name="mobile" type="tel" placeholder="Mobile Number" required>
  <input name="email" type="email" placeholder="Email Address">
</div>

<!-- ACCOUNT DETAILS -->
<h3>Account Details</h3>
<div class="row">
  <select id="account_type" name="account_type" required>
    <option value="">Select Account Type</option>
    <option>Savings Account</option>
    <option>Current Account</option>
    <option>Student Account</option>
    <option>Minor Account</option>
    <option>Zero Balance Account</option>
  </select>

  <input id="account_no" name="account_number" placeholder="Account Number" readonly required>

  <input id="open_date" name="opening_date" readonly>
</div>

<!-- ADDRESS -->
<h3>Address & Branch Details</h3>
<div class="row">
  <select id="state" name="state" required>
    <option value="">Select State</option>
  </select>

  <select id="district" name="district" required>
    <option value="">Select District</option>
  </select>

  <input id="place" name="place" placeholder="Place / Village / City" required>
</div>

<div class="row">
  <input id="pincode" name="pincode" placeholder="PIN Code" readonly>
  <input id="ifsc" name="ifsc_code" placeholder="IFSC Code" readonly>
</div>

<div class="row">
  <textarea name="full_address" placeholder="Complete Residential Address" required></textarea>
</div>

<!-- SIGNATURE -->
<h3>Signature</h3>
<div class="row">
  <input type="file" name="signature" accept="image/*" required>
</div>

<p class="note">
No PAN or Aadhaar required. Demo / educational banking interface.
</p>

<button type="submit">Create Account</button>

</form>

<script>
// Opening date
document.getElementById("open_date").value =
  new Date().toISOString().split("T")[0];

// Account number
const accMap={
  "Savings Account":"1001",
  "Current Account":"2001",
  "Student Account":"4001",
  "Minor Account":"3001",
  "Zero Balance Account":"5001"
};

document.getElementById("account_type").onchange=e=>{
  const code=accMap[e.target.value]||"9999";
  const rnd=Math.floor(100000+Math.random()*900000);
  document.getElementById("account_no").value=`MBS-${code}-${rnd}`;
};

// Load ALL INDIA states & districts
fetch("https://cdn.jsdelivr.net/npm/india-state-district@latest/state_district.json")
.then(r=>r.json())
.then(data=>{
  const s=document.getElementById("state");
  const d=document.getElementById("district");

  Object.keys(data).forEach(st=>{
    s.innerHTML+=`<option>${st}</option>`;
  });

  s.onchange=()=>{
    d.innerHTML=`<option value="">Select District</option>`;
    if(!s.value) return;
    data[s.value].forEach(dist=>{
      d.innerHTML+=`<option>${dist}</option>`;
    });
  };
});

// Place → PIN (ALL INDIA)
document.getElementById("place").addEventListener("blur",()=>{
  const q=`${place.value}, ${district.value}, ${state.value}, India`;
  fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q)}`)
  .then(r=>r.json())
  .then(res=>{
    if(res[0]){
      fetch(`https://nominatim.openstreetmap.org/details.php?format=json&place_id=${res[0].place_id}`)
      .then(r=>r.json())
      .then(d=>{
        if(d.address && d.address.postcode){
          pincode.value=d.address.postcode;
        }
      });
    }
  });
});

// IFSC generation
document.getElementById("district").addEventListener("change",()=>{
  if(!state.value||!district.value) return;
  ifsc.value="MBS0"+
    state.value.substring(0,2).toUpperCase()+
    district.value.substring(0,2).toUpperCase()+
    "01";
});
</script>

</body>
</html>
