<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Account Opening Form</title>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#7f3fbf,#5dade2);
  margin:0; padding:0;
}
.container{
  max-width:900px;
  margin:30px auto;
  background:#fff;
  border-radius:12px;
  padding:25px;
  box-shadow:0 10px 30px rgba(0,0,0,.3);
}
h1{
  text-align:center;
  color:#5b2c6f;
}
.section{
  border:1px solid #ddd;
  border-radius:8px;
  padding:15px;
  margin-top:15px;
}
.section h3{
  margin-top:0;
  color:#2471a3;
}
label{display:block;margin-top:10px;font-weight:bold;}
input,select,textarea{
  width:100%;
  padding:8px;
  margin-top:4px;
  border-radius:5px;
  border:1px solid #ccc;
}
.id-box{display:none;margin-top:10px;}
button{
  margin-top:20px;
  width:100%;
  padding:12px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:linear-gradient(90deg,#d4af37,#c0c0c0);
  cursor:pointer;
}
button:disabled{opacity:.5;cursor:not-allowed;}
</style>
</head>

<body>
<div class="container">

<h1>Account Opening Form</h1>

<form id="accountForm" action="https://formspree.io/f/xbdyeagw" method="POST">

<!-- BASIC DETAILS -->
<div class="section">
<h3>Basic Details</h3>
<label>Full Name</label>
<input name="Full Name" required>

<label>Date of Birth</label>
<input type="date" name="DOB" required>

<label>Mobile Number</label>
<input id="mobile" name="Mobile" maxlength="10" required>

<label>Email</label>
<input type="email" name="Email">

<label>Address</label>
<textarea name="Address" required></textarea>
</div>

<!-- ID PROOF -->
<div class="section">
<h3>Identity Proof</h3>

<label><input type="radio" name="ID Proof" value="MATS" onclick="toggleID('mats')" required> MATS Number</label>
<label><input type="radio" name="ID Proof" value="Form 60" onclick="toggleID('form60')"> Form 60</label>

<div id="mats" class="id-box">
  <label>MATS Number</label>
  <input name="MATS Number">
</div>

<div id="form60" class="id-box">
  <label>Father / Spouse Name</label>
  <input name="Father/Spouse">

  <label>Age</label>
  <input type="number" name="Age">

  <label>Nationality</label>
  <input name="Nationality" value="Indian">

  <label>Transaction Type</label>
  <input name="Transaction" value="Opening of Savings Account">

  <label>Amount (â‚¹)</label>
  <input name="Amount">

  <label>Mode</label>
  <select name="Mode">
    <option>Cash</option>
    <option>Cheque</option>
    <option>Transfer</option>
  </select>

  <label>PAN Declaration</label>
  <select name="PAN Declaration">
    <option>I do not have PAN</option>
    <option>I have applied for PAN</option>
  </select>

  <label>Place</label>
  <input name="Place">
</div>
</div>

<!-- SYSTEM GENERATED -->
<div class="section">
<h3>System Generated</h3>

<label>Account Number</label>
<input id="accountNumber" name="Account Number" readonly>

<label>Date</label>
<input id="today" name="Date" readonly>
</div>

<button id="submitBtn" type="submit" disabled>Submit & Download PDF</button>

</form>
</div>

<script>
const mobile=document.getElementById("mobile");
const submitBtn=document.getElementById("submitBtn");
const account=document.getElementById("accountNumber");
document.getElementById("today").value=new Date().toISOString().slice(0,10);

function toggleID(id){
  document.querySelectorAll(".id-box").forEach(d=>d.style.display="none");
  document.getElementById(id).style.display="block";
}

mobile.addEventListener("input",()=>{
  mobile.value=mobile.value.replace(/\D/g,"");
  if(mobile.value.length===10){
    const last4=mobile.value.slice(-4);
    const first4=Math.floor(1000+Math.random()*9000);
    account.value=first4+last4;
    submitBtn.disabled=false;
  }else{
    submitBtn.disabled=true;
  }
});

document.getElementById("accountForm").addEventListener("submit",function(e){
  e.preventDefault();
  const {jsPDF}=window.jspdf;
  const pdf=new jsPDF();
  let y=10;

  [...this.elements].forEach(el=>{
    if(el.name && el.value){
      pdf.text(el.name+": "+el.value,10,y);
      y+=8;
    }
  });

  pdf.save("Account_"+account.value+".pdf");
  this.submit();
});
</script>

</body>
</html>
